<script src="{{ asset('assets/article/article-editor.min.js', 'public') }}"></script>
<link rel="stylesheet" href="{{ asset('assets/article/css/article-editor.min.css', 'public') }}">
{{ article_includes() }}
<script>
ArticleEditor.settings = {
    callbacks: {
        image: {
            uploadError: function(response)
            {
                alert(response.message);
            }
        },
        file: {
            uploadError: function(response)
            {
                alert(response.message);
            }
        }
    }
};

function initArticles() {
    ArticleEditor('.article-field', {{ article_settings() }});
}

const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        mutation.addedNodes.forEach(function(node) {
            if ($(node).hasClass('collection-item')) {
                initArticles();
            }
        });
    });
});

observer.observe(document.body, {
    childList: true,
    subtree: true
});

initArticles();
</script>
