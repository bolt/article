ArticleEditor.add("plugin","selector",{translations:{en:{selector:{selector:"Selector",save:"Save",cancel:"Cancel"}}},defaults:{icon:'<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="m10.6663083 2.14369002c.5071647.07664087.8669828.53941479.8491564 1.06286535l-.0109223.12172524-.2435424 1.67154209 1.239.0001773c.5522847 0 1 .44771525 1 1 0 .51283584-.3860402.93550716-.8833789.99327227l-.1166211.00672773-1.531-.0001773-.291 2 1.322.0001773c.5522847 0 1 .44771525 1 1 0 .5128358-.3860402.9355072-.8833789.9932723l-.1166211.0067277-1.613-.0001773-.3121956 2.1487091c-.08323349.571695-.59347185.9682364-1.13964926.8857001-.50716474-.0766409-.86698283-.5394148-.84915642-1.0628653l.01092235-.1217253.26807893-1.8498186h-1.978l-.31219557 2.1487091c-.08323352.571695-.59347188.9682364-1.13964929.8857001-.50716474-.0766409-.86698283-.5394148-.84915642-1.0628653l.01092235-.1217253.26807893-1.8498186-1.365.0001773c-.55228475 0-1-.4477153-1-1 0-.51283584.38604019-.93550716.88337887-.99327227l.11662113-.00672773 1.656-.0001773.292-2-1.448.0001773c-.55228475 0-1-.44771525-1-1 0-.51283584.38604019-.93550716.88337887-.99327227l.11662113-.00672773 1.739-.0001773.28765901-1.97043255c.08323352-.571695.59347189-.96823646 1.1396493-.88570013.50716473.07664087.86698282.53941479.84915642 1.06286535l-.01092236.12172524-.24354237 1.67154209h1.978l.28765901-1.97043255c.08323352-.571695.59347189-.96823646 1.13964929-.88570013zm-2.0103083 6.85613268.292-2h-1.979l-.291 2z"/></svg>',popup:{title:"## selector.selector ##",width:"100%",form:{id:{type:"input",label:"ID"},classname:{type:"input",label:"Class"}},footer:{insert:{title:"## selector.save ##",command:"selector.save",type:"primary"},cancel:{title:"## selector.cancel ##",command:"popup.close"}}}},init:function(){this.arxclasses=[]},start:function(){this.app.toolbar.add("selector",{title:"## selector.selector ##",icon:this.opts.selector.icon,blocks:{all:"all",except:["variable"]},command:"selector.popup"})},popup:function(t,e){for(var s=this.app.popup.create("selector",this.opts.selector.popup),l=this.app.block.get().getBlock(),a=l.attr("class"),c=l.attr("id"),o=a.split(" "),i=(a="",0);i<o.length;i++)-1===o[i].search(this.prefix+"-")?a+=o[i]+" ":this.arxclasses.push(o[i]);s.setData({id:c,classname:a.trim()}),this.app.popup.open({button:e,focus:"id"})},save:function(t){this.app.popup.close();var e=this.app.block.get().getBlock(),s=t.getData();""===s.id?e.removeAttr("id"):e.attr("id",s.id),0<this.arxclasses.length&&(s.classname=s.classname+" "+this.arxclasses.join(" ")),e.attr("class",s.classname),this.arxclasses=[]}});